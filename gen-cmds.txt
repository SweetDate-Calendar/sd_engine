Accounts
mix phx.gen.live Accounts Account account name:string 
mix phx.gen.live Accounts User users name:string
mix phx.live Accounts Users user, name:string 

mix phx.gen.schema Accounts.AccountUser account_users \
  user_id:references:users account_id:references:accounts role:string

Calendar
mix phx.gen.live Calendars Calendar calendars account_id:references:accounts \
name:string color_theme:string visibility:string

mix phx.gen.schema Calendars.CalendarUser calendars_users \
  account_id:references:accounts \
  user_id:references:users calendar_id:references:calendars role:string 


Event
mix phx.gen.live Events Event events calendar_id:references:calendars \
name:string description:string color_theme:string visibility:string \
location:string start_time:utc_datetime end_time:utc_datetime \
recurrence_rule:string all_day:boolean


schema "events" do
    field :status, Ecto.Enum,
      values: [:scheduled, :cancelled, :postponed, :completed],
      default: :scheduled

    field :description, :string
    field :title, :string
    field :location, :string
    field :start_time, :utc_datetime
    field :end_time, :utc_datetime

    field :recurrence_rule, Ecto.Enum,
      values: [:none, :daily, :weekly, :monthly, :yearly],
      default: :none

    field :all_day, :boolean, default: false
    field :is_virtual, :boolean, default: false

    belongs_to :calendar, Calypso.Calendars.Calendar, type: :binary_id
    belongs_to :creator, Calypso.Accounts.User, type: :binary_id

    has_many :participations, Calypso.Events.Participation
    has_many :reminders, Calypso.Notifications.Reminder
    has_many :attachments, Calypso.Events.Attachment

    many_to_many :tags, Calypso.Events.Tag, join_through: "event_tags"

    timestamps(type: :utc_datetime)
  end